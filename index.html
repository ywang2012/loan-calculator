<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loan Calc PWA</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4a90e2" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#0d1218" media="(prefers-color-scheme: dark)">
    <script src="chart.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="title-row">
                <h1>Loan Calculator</h1>
            </div>
            <label class="theme-picker">
                <span class="theme-label">Theme</span>
                <select id="theme-toggle" class="theme-toggle" aria-label="Theme">
                    <option value="system">System</option>
                    <option value="light">Light</option>
                    <option value="dark">Dark</option>
                </select>
            </label>
        </div>

        <div class="input-group">
            <label for="amount">Loan Amount ($)</label>
            <input type="text" id="amount" placeholder="e.g. 10,000" value="10,000" inputmode="decimal">
        </div>

        <div class="input-group">
            <label for="interest">Interest Rate (%)</label>
            <input type="number" id="interest" placeholder="e.g. 4.5" step="0.1" inputmode="decimal">
        </div>

        <div class="input-group">
            <label for="years">Loan Term (Years)</label>
            <input type="number" id="years" placeholder="e.g. 5" inputmode="decimal">
        </div>

        <div class="input-group">
            <label for="start-date">Start Date (Optional)</label>
            <input type="month" id="start-date" inputmode="decimal">
        </div>

        <div class="primary-actions">
            <button id="import-btn" class="link-btn" type="button">Import CSV</button>
            <input id="import-file" class="file-input" type="file" accept=".csv,text/csv" hidden>
            <button id="calc-btn">Calculate</button>
        </div>

        <div id="results" class="hidden">
            <h2>Monthly Payment</h2>
            <div class="monthly-payment" id="monthly-payment">$0.00</div>

            <div class="details">
                <p>Total Payment: <span id="total-payment">$0.00</span></p>
                <p>Total Interest: <span id="total-interest">$0.00</span></p>
            </div>
        </div>

        <div class="button-group hidden" id="action-buttons">
            <button id="toggle-schedule-btn" class="secondary-btn">Amortization Schedule</button>
            <button id="toggle-chart-btn" class="secondary-btn">Payment Graph</button>
            <button id="export-btn" class="secondary-btn">Export CSV</button>
        </div>

        <div class="chart-container hidden" id="chart-wrapper">
            <h3>Payment Composition</h3>
            <canvas id="loanChart"></canvas>
        </div>

        <div id="savings-summary" class="hidden savings-summary">
            <strong>Impact:</strong> You will finish <span id="months-saved">0</span> months early and save <span id="interest-saved">$0.00</span> in interest!
        </div>

        <div id="schedule-container" class="hidden">
            <h3>Amortization Schedule</h3>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Month</th>
                            <th>Date</th>
                            <th>Interest</th>
                            <th>Principal</th>
                            <th>Balance</th>
                            <th>Total Int.</th>
                            <th>Total Paid</th>
                            <th>Extra</th>
                        </tr>
                    </thead>
                    <tbody id="schedule-body">
                        </tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="toast" class="toast hidden" role="status" aria-live="polite"></div>

    <script src="app.js"></script>
</body>
</html>
